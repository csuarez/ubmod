<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="velocityConfig" class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
        <property name="resourceLoaderPath" value="/WEB-INF/templates/custom/,/WEB-INF/templates/default/"/>
    </bean>
    
    <bean id="themeResolver" class="org.springframework.web.servlet.theme.FixedThemeResolver">
        <property name="defaultThemeName" value="ubmod"/>
    </bean>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityLayoutViewResolver"> 
        <property name="viewClass" value="org.springframework.web.servlet.view.velocity.VelocityLayoutView"/>
        <property name="layoutUrl" value="/layouts/default.vm"/>
        <property name="cache" value="true"/>
        <property name="prefix" value=""/>
        <property name="suffix" value=".vm"/>
        <property name="requestContextAttribute" value="requestContext"/>
        <property name="exposeSpringMacroHelpers" value="true"/>
        <property name="toolboxConfigLocation" value="/WEB-INF/velocity-toolbox.xml"/>
        <property name="order" value="2"/>
    </bean>
    
    <bean id="partialViewResolver" class="org.springframework.web.servlet.view.XmlViewResolver">
        <property name="order" value="1"/>
        <property name="location" value="/WEB-INF/partial-views.xml"/>
    </bean>
    
    <bean id="partialControllerResolver" class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
        <property name="mappings">
            <value>
            /partial/dashboard=dashboardPartial
            /partial/wait-time=waitTimePartial
            /partial/cpu-consumption=cpuConsumptionPartial
            /partial/show/group=showGroupPartial
            /partial/show/user=showUserPartial
            /partial/show/queue=showQueuePartial
            </value>
        </property>
    </bean>
    
    <bean id="partialController" class="edu.buffalo.ccr.ubmod.controller.PartialController">
        <property name="methodNameResolver" ref="partialControllerResolver"/>
        <property name="dataAccessFacade" ref="dataAccessFacade"/>
        <property name="chartService" ref="chartService"/>
    </bean>
    
    <bean id="defaultPageResolver" class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
        <property name="mappings">
            <value>
            /=dashboard
            /index.html=dashboard
            /dashboard=dashboard
            /about=about
            /cpu-consumption=cpuConsumption
            /wait-time=waitTime
            /user=userActivity
            /group=groupActivity
            /queue=queueActivity
            </value>
        </property>
    </bean>
    
    <bean id="defaultPageController" class="edu.buffalo.ccr.ubmod.controller.DefaultPageController">
        <property name="methodNameResolver" ref="defaultPageResolver"/>
    </bean>
    
    <bean id="jsonResolver" class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
        <property name="mappings">
            <value>
            /data/activity/user=userActivity
            /data/activity/group=groupActivity
            /data/activity/queue=queueActivity
            /data/list/cluster=clusterList
            /data/list/interval=intervalList
            </value>
        </property>
    </bean>
    
    <bean id="jsonController" class="edu.buffalo.ccr.ubmod.controller.JSONController">
        <property name="methodNameResolver" ref="jsonResolver"/>
        <property name="dataAccessFacade" ref="dataAccessFacade"/>
    </bean>
    
    <bean id="jfreeChartController" class="org.springframework.web.servlet.mvc.ServletWrappingController">
        <property name="servletClass" value="org.jfree.chart.servlet.DisplayChart"/>
    </bean>
    
    <bean id="fileController"
         class="org.springframework.web.servlet.mvc.UrlFilenameViewController">
        <property name="prefix" value="/js/" />
        <property name="suffix" value=".js" />
    </bean>
    
    <bean id="defaultMappings" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <value>
                /chart=jfreeChartController
                /data/**=jsonController
                /partial/**=partialController
                /js/**=fileController
                /**=defaultPageController
            </value>
        </property>
    </bean>
</beans>

